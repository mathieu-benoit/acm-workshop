<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.109.0"><meta name=generator content="Relearn 5.11.2+tip"><meta name=description content="Duration: 20 min | Persona: Platform Admin"><meta name=author content="Mathieu Benoit"><title>Create GKE cluster ::</title><link href=/acm-workshop/images/favicon.png?1676004797 rel=icon type=image/png><link href=/acm-workshop/css/fontawesome-all.min.css?1676004797 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/acm-workshop/css/fontawesome-all.min.css?1676004797 rel=stylesheet></noscript><link href=/acm-workshop/css/auto-complete.css?1676004797 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/acm-workshop/css/auto-complete.css?1676004797 rel=stylesheet></noscript><link href=/acm-workshop/css/perfect-scrollbar.min.css?1676004797 rel=stylesheet><link href=/acm-workshop/css/nucleus.css?1676004797 rel=stylesheet><link href=/acm-workshop/css/fonts.css?1676004797 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/acm-workshop/css/fonts.css?1676004797 rel=stylesheet></noscript><link href=/acm-workshop/css/theme.css?1676004797 rel=stylesheet><link href=/acm-workshop/css/theme-mine.css?1676004797 rel=stylesheet id=variant-style><link href=/acm-workshop/css/ie.css?1676004797 rel=stylesheet><link href=/acm-workshop/css/variant.css?1676004797 rel=stylesheet><link href=/acm-workshop/css/print.css?1676004797 rel=stylesheet media=print><script src=/acm-workshop/js/url.js?1676004797></script>
<script src=/acm-workshop/js/variant.js?1676004797></script>
<script>window.index_json_url="/acm-workshop/index.json";var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \u0022{0}\u0022",window.T_N_results_found="{1} results found for \u0022{0}\u0022",baseUriFull="https://mathieu-benoit.github.io/acm-workshop/",window.variants&&variants.init(["mine"])</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-N4LZTQ74QV"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-N4LZTQ74QV",{anonymize_ip:!1})}</script></head><body class="mobile-support html" data-url=/acm-workshop/gke-cluster/create-gke-cluster/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div class=navigation><a class="nav nav-next topbar-link" href=/acm-workshop/gke-cluster/allow-fleet/index.html title="Allow Fleet (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a></div><div class=navigation><a class="nav nav-prev topbar-link" href=/acm-workshop/gke-cluster/enforce-gke-policies/index.html title="Enforce GKE policies (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a></div><div id=top-github-link><a class="github-link topbar-link" title='Edit (CTRL+ALT+w)' href=https://github.com/mathieu-benoit/acm-workshop/edit/main/content/gke-cluster/create-gke-cluster.md target=_blank><i class="fas fa-pen fa-fw"></i></a></div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle class=topbar-link title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span>
<span id=toc-menu title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/acm-workshop/index.html><span itemprop=name>ACM/ASM Workshop</span></a><meta itemprop=position content="1">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/acm-workshop/gke-cluster/index.html><span itemprop=name>4. GKE cluster</span></a><meta itemprop=position content="2">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Create GKE cluster</span><meta itemprop=position content="3"></li></ol></div><div class="default-animation progress"><div class=toc-wrapper dir=ltr><nav id=TableOfContents><ul><li><a href=#define-gke-cluster>Define GKE cluster</a></li><li><a href=#define-gke-primary-node-pools-service-account>Define GKE primary node pool&rsquo;s service account</a></li><li><a href=#define-gke-primary-node-pool>Define GKE primary node pool</a></li><li><a href=#deploy-kubernetes-manifests>Deploy Kubernetes manifests</a></li><li><a href=#check-deployments>Check deployments</a></li></ul></nav></div></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags><div class=tags><a class=tag-link href=/acm-workshop/tags/gke/index.html>gke</a>
<a class=tag-link href=/acm-workshop/tags/kcc/index.html>kcc</a>
<a class=tag-link href=/acm-workshop/tags/platform-admin/index.html>platform-admin</a>
<a class=tag-link href=/acm-workshop/tags/security-tips/index.html>security-tips</a></div></div><article class=default><h1 id=create-gke-cluster>Create GKE cluster</h1><p><a href=#image-aea328c4ac3545013f9ddccf1e62285d class=lightbox-link><img src=/images/platform-admin.png alt="Platform Admin" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-aea328c4ac3545013f9ddccf1e62285d><img src=/images/platform-admin.png alt="Platform Admin" class=lightbox-image loading=lazy></a>
<em>Duration: 20 min | Persona: Platform Admin</em></p><p>In this section, you will set up a secured GKE cluster including features like: workload identity, least privilege service account for the nodes, Dataplane V2, private nodes, confidential and shielded nodes, etc.</p><p>Initialize variables:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>WORK_DIR<span style=color:#f92672>=</span>~/
</span></span><span style=display:flex><span>source <span style=color:#e6db74>${</span>WORK_DIR<span style=color:#e6db74>}</span>acm-workshop-variables.sh
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;export TENANT_PROJECT_NUMBER=</span><span style=color:#66d9ef>$(</span>gcloud projects describe $TENANT_PROJECT_ID --format<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;get(projectNumber)&#39;</span><span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span> &gt;&gt; <span style=color:#e6db74>${</span>WORK_DIR<span style=color:#e6db74>}</span>acm-workshop-variables.sh
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;export GKE_SA=gke-primary-pool&#34;</span> &gt;&gt; <span style=color:#e6db74>${</span>WORK_DIR<span style=color:#e6db74>}</span>acm-workshop-variables.sh
</span></span><span style=display:flex><span>source <span style=color:#e6db74>${</span>WORK_DIR<span style=color:#e6db74>}</span>acm-workshop-variables.sh
</span></span></code></pre></div><h2 id=define-gke-cluster>Define GKE cluster</h2><p>Define the <a href=https://cloud.google.com/config-connector/docs/reference/resource-docs/container/containercluster target=_blank>GKE cluster</a> with empty node pool:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF &gt; ${WORK_DIR}$TENANT_PROJECT_DIR_NAME/gke-cluster.yaml
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: container.cnrm.cloud.google.com/v1beta1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: ContainerCluster
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: ${GKE_NAME}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  annotations:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    cnrm.cloud.google.com/project-id: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    cnrm.cloud.google.com/remove-default-node-pool: &#34;true&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    config.kubernetes.io/depends-on: compute.cnrm.cloud.google.com/namespaces/${TENANT_PROJECT_ID}/ComputeSubnetwork/${GKE_NAME}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  labels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    mesh_id: proj-${TENANT_PROJECT_NUMBER}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  addonsConfig:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    gcePersistentDiskCsiDriverConfig:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      enabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    httpLoadBalancing:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      disabled: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  confidentialNodes:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    enabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  datapathProvider: ADVANCED_DATAPATH
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  dnsConfig:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    clusterDns: CLOUD_DNS
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    clusterDnsScope: CLUSTER_SCOPE
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  enableShieldedNodes: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  initialNodeCount: 1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  ipAllocationPolicy:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    servicesSecondaryRangeName: servicesrange
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    clusterSecondaryRangeName: clusterrange
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  location: ${GKE_LOCATION}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  loggingConfig:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    enableComponents:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - &#34;SYSTEM_COMPONENTS&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - &#34;WORKLOADS&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  monitoringConfig:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    enableComponents:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - &#34;SYSTEM_COMPONENTS&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  networkingMode: VPC_NATIVE
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  networkRef:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    name: gke
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  nodeConfig:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    machineType: n2d-standard-4
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  privateClusterConfig:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    enablePrivateEndpoint: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    enablePrivateNodes: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    masterIpv4CidrBlock: 172.16.0.0/28
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  releaseChannel:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    channel: RAPID
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  subnetworkRef:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    name: gke
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  workloadIdentityConfig:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    workloadPool: ${TENANT_PROJECT_ID}.svc.id.goog
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><h2 id=define-gke-primary-node-pools-service-account>Define GKE primary node pool&rsquo;s service account</h2><p>Define the GKE primary node pool&rsquo;s <a href=https://cloud.google.com/config-connector/docs/reference/resource-docs/iam/iamserviceaccount target=_blank>Google Service Account</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF &gt; ${WORK_DIR}$TENANT_PROJECT_DIR_NAME/gke-primary-pool-sa.yaml
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: iam.cnrm.cloud.google.com/v1beta1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: IAMServiceAccount
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  annotations:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    cnrm.cloud.google.com/project-id: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: ${GKE_SA}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  displayName: ${GKE_SA}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><p>Define the <code>logging.logWriter</code>, <code>monitoring.metricWriter</code> and <code>monitoring.viewer</code> roles with an <a href=https://cloud.google.com/config-connector/docs/reference/resource-docs/iam/iampolicymember target=_blank><code>IAMPolicyMember</code></a> resource for the GKE primary node pool&rsquo;s service account:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF &gt; ${WORK_DIR}$TENANT_PROJECT_DIR_NAME/log-writer-gke-sa.yaml
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: iam.cnrm.cloud.google.com/v1beta1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: IAMPolicyMember
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: log-writer
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  annotations:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    config.kubernetes.io/depends-on: iam.cnrm.cloud.google.com/namespaces/${TENANT_PROJECT_ID}/IAMServiceAccount/${GKE_SA}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  memberFrom:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    serviceAccountRef:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      name: ${GKE_SA}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      namespace: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  resourceRef:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    kind: Project
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    external: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  role: roles/logging.logWriter
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF &gt; ${WORK_DIR}$TENANT_PROJECT_DIR_NAME/metric-writer-gke-sa.yaml
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: iam.cnrm.cloud.google.com/v1beta1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: IAMPolicyMember
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: metric-writer
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  annotations:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    config.kubernetes.io/depends-on: iam.cnrm.cloud.google.com/namespaces/${TENANT_PROJECT_ID}/IAMServiceAccount/${GKE_SA}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  memberFrom:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    serviceAccountRef:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      name: ${GKE_SA}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      namespace: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  resourceRef:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    kind: Project
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    external: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  role: roles/monitoring.metricWriter
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF &gt; ${WORK_DIR}$TENANT_PROJECT_DIR_NAME/monitoring-viewer-gke-sa.yaml
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: iam.cnrm.cloud.google.com/v1beta1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: IAMPolicyMember
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: monitoring-viewer
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  annotations:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    config.kubernetes.io/depends-on: iam.cnrm.cloud.google.com/namespaces/${TENANT_PROJECT_ID}/IAMServiceAccount/${GKE_SA}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  memberFrom:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    serviceAccountRef:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      name: ${GKE_SA}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      namespace: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  resourceRef:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    kind: Project
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    external: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  role: roles/monitoring.viewer
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF &gt; ${WORK_DIR}$TENANT_PROJECT_DIR_NAME/cloudtrace-agent-gke-sa.yaml
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: iam.cnrm.cloud.google.com/v1beta1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: IAMPolicyMember
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: cloudtrace-agent
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  annotations:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    config.kubernetes.io/depends-on: iam.cnrm.cloud.google.com/namespaces/${TENANT_PROJECT_ID}/IAMServiceAccount/${GKE_SA}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  memberFrom:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    serviceAccountRef:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      name: ${GKE_SA}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      namespace: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  resourceRef:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    kind: Project
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    external: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  role: roles/cloudtrace.agent
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><h2 id=define-gke-primary-node-pool>Define GKE primary node pool</h2><p>Define the GKE primary node pool:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF &gt; ${WORK_DIR}$TENANT_PROJECT_DIR_NAME/gke-primary-pool.yaml
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: container.cnrm.cloud.google.com/v1beta1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: ContainerNodePool
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: ${GKE_NAME}-primary
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: ${TENANT_PROJECT_ID}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  annotations:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    config.kubernetes.io/depends-on: container.cnrm.cloud.google.com/namespaces/${TENANT_PROJECT_ID}/ContainerCluster/${GKE_NAME}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  clusterRef:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    name: ${GKE_NAME}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  location: ${GKE_LOCATION}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  management:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    autoRepair: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    autoUpgrade: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  nodeConfig:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    imageType: COS_CONTAINERD
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    diskSizeGb: 100
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    diskType: pd-ssd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    labels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      gke.io/nodepool: primary
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    machineType: n2d-standard-4
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    oauthScopes:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - https://www.googleapis.com/auth/cloud-platform
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    shieldedInstanceConfig:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      enableIntegrityMonitoring: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      enableSecureBoot: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    serviceAccountRef:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      name: ${GKE_SA}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  nodeCount: 3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><h2 id=deploy-kubernetes-manifests>Deploy Kubernetes manifests</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>cd ~/$TENANT_PROJECT_DIR_NAME/
</span></span><span style=display:flex><span>git add . <span style=color:#f92672>&amp;&amp;</span> git commit -m <span style=color:#e6db74>&#34;GKE cluster, primary nodepool and SA for Tenant project&#34;</span> <span style=color:#f92672>&amp;&amp;</span> git push origin main
</span></span></code></pre></div><h2 id=check-deployments>Check deployments</h2><div class="mermaid align-center">graph TD;
IAMServiceAccount-.->Project
ContainerNodePool-->ContainerCluster
ContainerNodePool-->IAMServiceAccount
IAMPolicyMember-->IAMServiceAccount
IAMPolicyMember-.->Project
IAMPolicyMember-->IAMServiceAccount
IAMPolicyMember-.->Project
IAMPolicyMember-->IAMServiceAccount
IAMPolicyMember-.->Project
IAMPolicyMember-->IAMServiceAccount
IAMPolicyMember-.->Project
ContainerCluster-.->ComputeSubnetwork</div><p>List the Kubernetes resources managed by Config Sync in <strong>Config Controller</strong> for the <strong>Tenant project configs</strong> repository:<div class=tab-panel data-tab-group=cs-status-ui><div class=tab-nav><button data-tab-item=UI class="tab-nav-button active" onclick='switchTab("cs-status-ui","UI")'>
<span>UI</span></button>
<button data-tab-item=gcloud class=tab-nav-button onclick='switchTab("cs-status-ui","gcloud")'>
<span>gcloud</span></button></div><div class=tab-content><div data-tab-item=UI class="tab-content-text active"><p>Run this command and click on this link:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>echo -e <span style=color:#e6db74>&#34;https://console.cloud.google.com/kubernetes/config_management/packages?project=</span><span style=color:#e6db74>${</span>HOST_PROJECT_ID<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><p>Wait until you see the <code>Sync status</code> column as <code>Synced</code> and the <code>Reconcile status</code> column as <code>Current</code>.</p></div><div data-tab-item=gcloud class=tab-content-text><p>Run this command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>gcloud alpha anthos config sync repo describe <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --project $HOST_PROJECT_ID <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --managed-resources all <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --sync-name repo-sync <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --sync-namespace $TENANT_PROJECT_ID
</span></span></code></pre></div><p>Wait and re-run this command above until you see <code>"status": "SYNCED"</code>. All the <code>managed_resources</code> listed should have <code>STATUS: Current</code> too.</p></div></div></div></p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>The creation of the <code>ContainerCluster</code> and <code>ContainerNodePool</code> can take ~15 mins.</p></div></div><p>List the GitHub runs for the <strong>Tenant project configs</strong> repository:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>cd <span style=color:#e6db74>${</span>WORK_DIR<span style=color:#e6db74>}</span>$TENANT_PROJECT_DIR_NAME <span style=color:#f92672>&amp;&amp;</span> gh run list
</span></span></code></pre></div><p>List the Google Cloud resources created:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>gcloud projects get-iam-policy $TENANT_PROJECT_ID <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --filter<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;bindings.members:</span><span style=color:#e6db74>${</span>GKE_SA<span style=color:#e6db74>}</span><span style=color:#e6db74>@</span><span style=color:#e6db74>${</span>TENANT_PROJECT_ID<span style=color:#e6db74>}</span><span style=color:#e6db74>.iam.gserviceaccount.com&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --flatten<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;bindings[].members&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --format<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;table(bindings.role)&#34;</span>
</span></span><span style=display:flex><span>gcloud container clusters list <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --project $TENANT_PROJECT_ID
</span></span><span style=display:flex><span>gcloud container node-pools list <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --cluster $GKE_NAME <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --project $TENANT_PROJECT_ID <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --region $GKE_LOCATION
</span></span></code></pre></div><p>Wait and re-run this command above until you see the resources created.</p><footer class=footline></footer></article></div></main></div><aside id=sidebar class="default-animation showVisitedLinks" dir=ltr><div id=header-wrapper class=default-animation><div id=header class=default-animation><a id=logo href=/><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100" height="100" viewBox="0 0 24 24"><style>.st0{fill:#febc00}.st1{fill:#ee3c2b}.st2{fill:#2baa4f}.st3{fill:#3982f8}</style><polygon class="st0" points="6,15.8 12,5.3 18,15.8 23,20.8 23.2,21 23.2,21 12,1.6 0.8,21 0.8,21 1,20.8"/><g><g><polygon class="st1" points="12,9.7 1,20.8 5.6,18.7 12,12.3 18.4,18.7 23,20.8"/></g></g><polygon class="st2" points="6,20.6 1.8,22.4 22.2,22.4 18,20.6"/><polygon class="st3" points="23,20.8 12,15.8 1,20.8 0,22.4 1.8,22.4 12,17.8 22.2,22.4 24,22.4"/></svg></div><b>ACM/ASM Workshop</b></a></div></div><div id=content-wrapper class=highlightable><ul class=topics><li data-nav-id=/acm-workshop/overview/index.html class=dd-item><a href=/acm-workshop/overview/index.html>Overview<i class="fas fa-check read-icon"></i></a><ul id=subsections-802c60793ff0af3dfb7211e666dc12f4><li data-nav-id=/acm-workshop/overview/personas/index.html class=dd-item><a href=/acm-workshop/overview/personas/index.html>Personas<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/overview/agenda/index.html class=dd-item><a href=/acm-workshop/overview/agenda/index.html>Agenda<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/overview/before-you-begin/index.html class=dd-item><a href=/acm-workshop/overview/before-you-begin/index.html>Before you begin<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/overview/credits/index.html class=dd-item><a href=/acm-workshop/overview/credits/index.html>Credits<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/overview/costs/index.html class=dd-item><a href=/acm-workshop/overview/costs/index.html>Costs<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/acm-workshop/host-project/index.html class=dd-item><a href=/acm-workshop/host-project/index.html>1. Host project<i class="fas fa-check read-icon"></i></a><ul id=subsections-71c02f76cfc7d43b7427a340b0ea5395><li data-nav-id=/acm-workshop/host-project/create-host-project/index.html class=dd-item><a href=/acm-workshop/host-project/create-host-project/index.html>Create Host project<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/host-project/create-config-controller/index.html class=dd-item><a href=/acm-workshop/host-project/create-config-controller/index.html>Create Config Controller<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/host-project/set-up-host-project-git-repo/index.html class=dd-item><a href=/acm-workshop/host-project/set-up-host-project-git-repo/index.html>Set up Host project's Git repo<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/host-project/enforce-tenant-projects-policies/index.html class=dd-item><a href=/acm-workshop/host-project/enforce-tenant-projects-policies/index.html>Enforce Tenant projects policies<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/acm-workshop/tenant-project/index.html class=dd-item><a href=/acm-workshop/tenant-project/index.html>2. Tenant project<i class="fas fa-check read-icon"></i></a><ul id=subsections-f8117c090acee38678d57d19d7b86676><li data-nav-id=/acm-workshop/tenant-project/create-tenant-project/index.html class=dd-item><a href=/acm-workshop/tenant-project/create-tenant-project/index.html>Create Tenant project<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/tenant-project/set-up-gke-project-git-repo/index.html class=dd-item><a href=/acm-workshop/tenant-project/set-up-gke-project-git-repo/index.html>Set up Tenant project's Git repo<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/tenant-project/enforce-gcp-resources-policies/index.html class=dd-item><a href=/acm-workshop/tenant-project/enforce-gcp-resources-policies/index.html>Enforce GCP resources policies<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/tenant-project/allow-monitoring/index.html class=dd-item><a href=/acm-workshop/tenant-project/allow-monitoring/index.html>Allow Monitoring<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/tenant-project/set-up-monitoring/index.html class=dd-item><a href=/acm-workshop/tenant-project/set-up-monitoring/index.html>Set up Monitoring<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/acm-workshop/networking/index.html class=dd-item><a href=/acm-workshop/networking/index.html>3. Networking<i class="fas fa-check read-icon"></i></a><ul id=subsections-32ba51710c14dbc40b371b19ad442e93><li data-nav-id=/acm-workshop/networking/allow-networking/index.html class=dd-item><a href=/acm-workshop/networking/allow-networking/index.html>Allow Networking<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/networking/set-up-network/index.html class=dd-item><a href=/acm-workshop/networking/set-up-network/index.html>Set up Network<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/acm-workshop/gke-cluster/index.html class="dd-item parent"><a href=/acm-workshop/gke-cluster/index.html>4. GKE cluster<i class="fas fa-check read-icon"></i></a><ul id=subsections-e37d194a28b30160fa3e8554e980ff66><li data-nav-id=/acm-workshop/gke-cluster/allow-gke/index.html class=dd-item><a href=/acm-workshop/gke-cluster/allow-gke/index.html>Allow GKE<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/gke-cluster/enforce-gke-policies/index.html class=dd-item><a href=/acm-workshop/gke-cluster/enforce-gke-policies/index.html>Enforce GKE policies<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/gke-cluster/create-gke-cluster/index.html class="dd-item active"><a href=/acm-workshop/gke-cluster/create-gke-cluster/index.html>Create GKE cluster<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/gke-cluster/allow-fleet/index.html class=dd-item><a href=/acm-workshop/gke-cluster/allow-fleet/index.html>Allow Fleet<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/gke-cluster/set-up-gke-configs-git-repo/index.html class=dd-item><a href=/acm-workshop/gke-cluster/set-up-gke-configs-git-repo/index.html>Set up GKE configs's Git repo<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/gke-cluster/enforce-kubernetes-policies/index.html class=dd-item><a href=/acm-workshop/gke-cluster/enforce-kubernetes-policies/index.html>Enforce Kubernetes policies<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/gke-cluster/set-up-network-policies-logging/index.html class=dd-item><a href=/acm-workshop/gke-cluster/set-up-network-policies-logging/index.html>Set up NetworkPolicies logging<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/acm-workshop/artifact-registry/index.html class=dd-item><a href=/acm-workshop/artifact-registry/index.html>5. Artifact Registry<i class="fas fa-check read-icon"></i></a><ul id=subsections-b0fefb1065200f0d82d0ac5dbeaf14b9><li data-nav-id=/acm-workshop/artifact-registry/allow-artifact-registry/index.html class=dd-item><a href=/acm-workshop/artifact-registry/allow-artifact-registry/index.html>Allow Artifact Registry<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/artifact-registry/create-artifact-registry/index.html class=dd-item><a href=/acm-workshop/artifact-registry/create-artifact-registry/index.html>Create Artifact Registry<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/artifact-registry/enforce-artifact-registry-policies/index.html class=dd-item><a href=/acm-workshop/artifact-registry/enforce-artifact-registry-policies/index.html>Enforce Artifact Registry policies<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/acm-workshop/service-mesh/index.html class=dd-item><a href=/acm-workshop/service-mesh/index.html>6. Service Mesh<i class="fas fa-check read-icon"></i></a><ul id=subsections-01f5706994e63158591802a8c5b59db9><li data-nav-id=/acm-workshop/service-mesh/allow-asm/index.html class=dd-item><a href=/acm-workshop/service-mesh/allow-asm/index.html>Allow ASM<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/service-mesh/install-asm/index.html class=dd-item><a href=/acm-workshop/service-mesh/install-asm/index.html>Install ASM<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/service-mesh/set-up-asm-configs/index.html class=dd-item><a href=/acm-workshop/service-mesh/set-up-asm-configs/index.html>Set up ASM configs<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/service-mesh/enforce-service-mesh-policies/index.html class=dd-item><a href=/acm-workshop/service-mesh/enforce-service-mesh-policies/index.html>Enforce Service Mesh policies<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/acm-workshop/ingress-gateway/index.html class=dd-item><a href=/acm-workshop/ingress-gateway/index.html>7. Ingress Gateway<i class="fas fa-check read-icon"></i></a><ul id=subsections-095c34dc5a5830fbe6c098a111f4371b><li data-nav-id=/acm-workshop/ingress-gateway/create-ip-address/index.html class=dd-item><a href=/acm-workshop/ingress-gateway/create-ip-address/index.html>Create IP address<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/ingress-gateway/allow-cloud-armor/index.html class=dd-item><a href=/acm-workshop/ingress-gateway/allow-cloud-armor/index.html>Allow Cloud Armor<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/ingress-gateway/set-up-cloud-armor/index.html class=dd-item><a href=/acm-workshop/ingress-gateway/set-up-cloud-armor/index.html>Set up Cloud Armor<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/ingress-gateway/deploy-ingress-gateway/index.html class=dd-item><a href=/acm-workshop/ingress-gateway/deploy-ingress-gateway/index.html>Deploy Ingress Gateway<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/ingress-gateway/deploy-network-policies/index.html class=dd-item><a href=/acm-workshop/ingress-gateway/deploy-network-policies/index.html>Deploy NetworkPolicies<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/ingress-gateway/deploy-authorization-policies/index.html class=dd-item><a href=/acm-workshop/ingress-gateway/deploy-authorization-policies/index.html>Deploy AuthorizationPolicies<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/acm-workshop/whereami/index.html class=dd-item><a href=/acm-workshop/whereami/index.html>8. Whereami app<i class="fas fa-check read-icon"></i></a><ul id=subsections-7e9046ad5996f70995bf102f06a13f6e><li data-nav-id=/acm-workshop/whereami/set-up-dns/index.html class=dd-item><a href=/acm-workshop/whereami/set-up-dns/index.html>Set up DNS<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/whereami/set-up-url-uptime-check/index.html class=dd-item><a href=/acm-workshop/whereami/set-up-url-uptime-check/index.html>Set up URL uptime check<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/whereami/configure-config-sync/index.html class=dd-item><a href=/acm-workshop/whereami/configure-config-sync/index.html>Configure Config Sync<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/whereami/prepare-container/index.html class=dd-item><a href=/acm-workshop/whereami/prepare-container/index.html>Prepare container<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/whereami/deploy-app/index.html class=dd-item><a href=/acm-workshop/whereami/deploy-app/index.html>Deploy app<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/whereami/deploy-authorization-policy/index.html class=dd-item><a href=/acm-workshop/whereami/deploy-authorization-policy/index.html>Deploy AuthorizationPolicy<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/whereami/deploy-network-policies/index.html class=dd-item><a href=/acm-workshop/whereami/deploy-network-policies/index.html>Deploy NetworkPolicies<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/whereami/deploy-sidecar/index.html class=dd-item><a href=/acm-workshop/whereami/deploy-sidecar/index.html>Deploy Sidecar<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/acm-workshop/onlineboutique/index.html class=dd-item><a href=/acm-workshop/onlineboutique/index.html>9. Online Boutique apps<i class="fas fa-check read-icon"></i></a><ul id=subsections-ec235b6b5f6b4b955c3f353cbc6a519b><li data-nav-id=/acm-workshop/onlineboutique/set-up-dns/index.html class=dd-item><a href=/acm-workshop/onlineboutique/set-up-dns/index.html>Set up DNS<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/onlineboutique/set-up-url-uptime-check/index.html class=dd-item><a href=/acm-workshop/onlineboutique/set-up-url-uptime-check/index.html>Set up URL uptime check<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/onlineboutique/allow-config-sync/index.html class=dd-item><a href=/acm-workshop/onlineboutique/allow-config-sync/index.html>Allow Config Sync<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/onlineboutique/configure-config-sync/index.html class=dd-item><a href=/acm-workshop/onlineboutique/configure-config-sync/index.html>Configure Config Sync<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/onlineboutique/prepare-containers-and-chart/index.html class=dd-item><a href=/acm-workshop/onlineboutique/prepare-containers-and-chart/index.html>Prepare containers and chart<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/onlineboutique/deploy-apps/index.html class=dd-item><a href=/acm-workshop/onlineboutique/deploy-apps/index.html>Deploy apps<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/onlineboutique/deploy-authorization-policies/index.html class=dd-item><a href=/acm-workshop/onlineboutique/deploy-authorization-policies/index.html>Deploy AuthorizationPolicies<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/onlineboutique/deploy-network-policies/index.html class=dd-item><a href=/acm-workshop/onlineboutique/deploy-network-policies/index.html>Deploy NetworkPolicies<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/onlineboutique/deploy-sidecars/index.html class=dd-item><a href=/acm-workshop/onlineboutique/deploy-sidecars/index.html>Deploy Sidecars<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/onlineboutique/memorystore/index.html class="dd-item alwaysopen"><a href=/acm-workshop/onlineboutique/memorystore/index.html>Memorystore<i class="fas fa-check read-icon"></i></a><ul id=subsections-acc306800279fb4f6dfb080d8713bc2a><li data-nav-id=/acm-workshop/onlineboutique/memorystore/allow-memorystore/index.html class=dd-item><a href=/acm-workshop/onlineboutique/memorystore/allow-memorystore/index.html>Allow Memorystore<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/onlineboutique/memorystore/enforce-memorystore-policies/index.html class=dd-item><a href=/acm-workshop/onlineboutique/memorystore/enforce-memorystore-policies/index.html>Enforce Memorystore policies<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/onlineboutique/memorystore/create-memorystore/index.html class=dd-item><a href=/acm-workshop/onlineboutique/memorystore/create-memorystore/index.html>Create Memorystore<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/onlineboutique/memorystore/use-memorystore/index.html class=dd-item><a href=/acm-workshop/onlineboutique/memorystore/use-memorystore/index.html>Use Memorystore<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/onlineboutique/memorystore/secure-memorystore-access/index.html class=dd-item><a href=/acm-workshop/onlineboutique/memorystore/secure-memorystore-access/index.html>Secure Memorystore access<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/acm-workshop/onlineboutique/spanner/index.html class="dd-item alwaysopen"><a href=/acm-workshop/onlineboutique/spanner/index.html>Spanner<i class="fas fa-check read-icon"></i></a><ul id=subsections-bee50e7f4245ff1a78b215cd41d8a4dd><li data-nav-id=/acm-workshop/onlineboutique/spanner/allow-spanner/index.html class=dd-item><a href=/acm-workshop/onlineboutique/spanner/allow-spanner/index.html>Allow Spanner<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/onlineboutique/spanner/create-spanner/index.html class=dd-item><a href=/acm-workshop/onlineboutique/spanner/create-spanner/index.html>Create Spanner<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/onlineboutique/spanner/use-spanner/index.html class=dd-item><a href=/acm-workshop/onlineboutique/spanner/use-spanner/index.html>Use Spanner<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/acm-workshop/bankofanthos/index.html class=dd-item><a href=/acm-workshop/bankofanthos/index.html>10. Bank of Anthos apps<i class="fas fa-check read-icon"></i></a><ul id=subsections-8e9c8917aa02f581ef6507fa65eee2bc><li data-nav-id=/acm-workshop/bankofanthos/set-up-dns/index.html class=dd-item><a href=/acm-workshop/bankofanthos/set-up-dns/index.html>Set up DNS<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/bankofanthos/set-up-url-uptime-check/index.html class=dd-item><a href=/acm-workshop/bankofanthos/set-up-url-uptime-check/index.html>Set up URL uptime check<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/bankofanthos/configure-config-sync/index.html class=dd-item><a href=/acm-workshop/bankofanthos/configure-config-sync/index.html>Configure Config Sync<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/bankofanthos/prepare-containers/index.html class=dd-item><a href=/acm-workshop/bankofanthos/prepare-containers/index.html>Prepare containers<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/bankofanthos/deploy-apps/index.html class=dd-item><a href=/acm-workshop/bankofanthos/deploy-apps/index.html>Deploy apps<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/bankofanthos/deploy-authorization-policies/index.html class=dd-item><a href=/acm-workshop/bankofanthos/deploy-authorization-policies/index.html>Deploy AuthorizationPolicies<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/bankofanthos/deploy-network-policies/index.html class=dd-item><a href=/acm-workshop/bankofanthos/deploy-network-policies/index.html>Deploy NetworkPolicies<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/bankofanthos/deploy-sidecars/index.html class=dd-item><a href=/acm-workshop/bankofanthos/deploy-sidecars/index.html>Deploy Sidecars<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/acm-workshop/monitoring-and-audit/index.html class=dd-item><a href=/acm-workshop/monitoring-and-audit/index.html>11. Monitoring & Audit<i class="fas fa-check read-icon"></i></a><ul id=subsections-e7ce738b1a3297733bb8808d01228e61><li data-nav-id=/acm-workshop/monitoring-and-audit/verify-asm-version/index.html class=dd-item><a href=/acm-workshop/monitoring-and-audit/verify-asm-version/index.html>Verify ASM version<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/monitoring-and-audit/monitor-apps-security/index.html class=dd-item><a href=/acm-workshop/monitoring-and-audit/monitor-apps-security/index.html>Monitor apps security<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/monitoring-and-audit/monitor-apps-health/index.html class=dd-item><a href=/acm-workshop/monitoring-and-audit/monitor-apps-health/index.html>Monitor apps health<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/monitoring-and-audit/trace-apps/index.html class=dd-item><a href=/acm-workshop/monitoring-and-audit/trace-apps/index.html>Trace apps<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/monitoring-and-audit/monitor-waf-rules/index.html class=dd-item><a href=/acm-workshop/monitoring-and-audit/monitor-waf-rules/index.html>Monitor WAF rules<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/monitoring-and-audit/scan-workloads/index.html class=dd-item><a href=/acm-workshop/monitoring-and-audit/scan-workloads/index.html>Scan workloads<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/monitoring-and-audit/monitor-resources-synced/index.html class=dd-item><a href=/acm-workshop/monitoring-and-audit/monitor-resources-synced/index.html>Monitor resources synced<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/monitoring-and-audit/monitor-policies-violations/index.html class=dd-item><a href=/acm-workshop/monitoring-and-audit/monitor-policies-violations/index.html>Monitor policies violations<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/acm-workshop/monitoring-and-audit/monitor-uptime-checks/index.html class=dd-item><a href=/acm-workshop/monitoring-and-audit/monitor-uptime-checks/index.html>Monitor uptime checks<i class="fas fa-check read-icon"></i></a></li></ul></li></ul><div id=shortcuts><div class=nav-title>More</div><ul><li><a class=padding href=https://github.com/mathieu-benoit/acm-workshop/releases><i class='fab fa-fw fa-github'></i> Release notes</a></li><li><a class=padding href=/acm-workshop/tags><i class='fas fa-tags'></i> Tags</a></li></ul></div><div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"></div><hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVisitedLinks"><ul><li id=select-language-container class=footerLangSwitch><div class="padding select-container"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-language>Language</label>
<select id=select-language onchange="location=baseUri+this.value"></select></div><div class=select-clear></div></div></li><li id=select-variant-container class=footerVariantSwitch><div class="padding select-container"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-variant>Theme</label>
<select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=mine value=mine selected>Mine</option></select></div><div class=select-clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class="footerVisitedLinks showVisitedLinks"><button class=padding onclick=clearHistory()><i class="fas fa-history fa-fw"></i> Clear History</button></li></ul></div><div id=footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=/acm-workshop/js/clipboard.min.js?1676004797 defer></script>
<script src=/acm-workshop/js/perfect-scrollbar.min.js?1676004797 defer></script>
<script src=/acm-workshop/js/d3/d3-color.min.js?1676004797 defer></script>
<script src=/acm-workshop/js/d3/d3-dispatch.min.js?1676004797 defer></script>
<script src=/acm-workshop/js/d3/d3-drag.min.js?1676004797 defer></script>
<script src=/acm-workshop/js/d3/d3-ease.min.js?1676004797 defer></script>
<script src=/acm-workshop/js/d3/d3-interpolate.min.js?1676004797 defer></script>
<script src=/acm-workshop/js/d3/d3-selection.min.js?1676004797 defer></script>
<script src=/acm-workshop/js/d3/d3-timer.min.js?1676004797 defer></script>
<script src=/acm-workshop/js/d3/d3-transition.min.js?1676004797 defer></script>
<script src=/acm-workshop/js/d3/d3-zoom.min.js?1676004797 defer></script>
<script src=/acm-workshop/js/mermaid.min.js?1676004797 defer></script>
<script>window.themeUseMermaid=JSON.parse("{}")</script><script src=/acm-workshop/js/theme.js?1676004797 defer></script></body></html>