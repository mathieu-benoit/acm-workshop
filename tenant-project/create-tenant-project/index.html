<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.109.0">
    <meta name="generator" content="Relearn 5.16.2+tip">
    <meta name="description" content="Duration: 10 min | Persona: Org Admin">
    <meta name="author" content="Mathieu Benoit">
    <title>Create Tenant project</title>
    <link href="/acm-workshop/images/favicon.png?1686931423" rel="icon" type="image/png">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="/acm-workshop/css/fontawesome-all.min.css?1686931423" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/acm-workshop/css/fontawesome-all.min.css?1686931423" rel="stylesheet"></noscript>
    <link href="/acm-workshop/css/nucleus.css?1686931423" rel="stylesheet">
    <link href="/acm-workshop/css/auto-complete.css?1686931423" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/acm-workshop/css/auto-complete.css?1686931423" rel="stylesheet"></noscript>
    <link href="/acm-workshop/css/perfect-scrollbar.min.css?1686931423" rel="stylesheet">
    <link href="/acm-workshop/css/fonts.css?1686931423" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/acm-workshop/css/fonts.css?1686931423" rel="stylesheet"></noscript>
    <link href="/acm-workshop/css/theme.css?1686931423" rel="stylesheet">
    <link href="/acm-workshop/css/theme-mine.css?1686931423" rel="stylesheet" id="variant-style">
    <link href="/acm-workshop/css/variant.css?1686931423" rel="stylesheet">
    <link href="/acm-workshop/css/print.css?1686931423" rel="stylesheet" media="print">
    <link href="/acm-workshop/css/ie.css?1686931423" rel="stylesheet">
    <script src="/acm-workshop/js/url.js?1686931423"></script>
    <script src="/acm-workshop/js/variant.js?1686931423"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72""
      window.index_json_url="/acm-workshop/index.json";
      var root_url="/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/mathieu-benoit.github.io\/acm-workshop/';
      window.variants && variants.init( [ 'mine' ] );
    </script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-N4LZTQ74QV"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-N4LZTQ74QV', { 'anonymize_ip': false });
}
</script>

  </head>
  <body class="mobile-support html disableInlineCopyToClipboard" data-url="/acm-workshop/tenant-project/create-tenant-project/index.html">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div class="navigation">
            <a class="nav nav-next topbar-link" href="/acm-workshop/tenant-project/set-up-gke-project-git-repo/index.html" title="Set up Tenant project&#39;s Git repo (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a>
          </div>
          <div class="navigation">
            <a class="nav nav-prev topbar-link" href="/acm-workshop/tenant-project/index.html" title="2. Tenant project (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a>
          </div>
          <div id="top-github-link">
            <a class="github-link topbar-link" title='Edit (CTRL+ALT+w)' href="https://github.com/mathieu-benoit/acm-workshop/edit/main/app/contenttenant-project/create-tenant-project.md" target="_blank">
              <i class="fas fa-pen fa-fw"></i>
            </a>
          </div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" class="topbar-link" title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <span id="toc-menu" title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/acm-workshop/index.html"><span itemprop="name">ACM/ASM Workshop</span></a><meta itemprop="position" content="1"> &gt; </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/acm-workshop/tenant-project/index.html"><span itemprop="name">2. Tenant project</span></a><meta itemprop="position" content="2"> &gt; </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Create Tenant project</span><meta itemprop="position" content="3"></li>
            </ol>
          </div>
          <div class="default-animation progress">
            <div class="toc-wrapper"><nav id="TableOfContents">
  <ul>
    <li><a href="#define-gcp-project">Define GCP project</a></li>
    <li><a href="#define-tenant-project-service-account">Define Tenant project service account</a></li>
    <li><a href="#define-tenant-project-namespace-and-configconnectorcontext">Define Tenant project namespace and ConfigConnectorContext</a></li>
    <li><a href="#deploy-kubernetes-manifests">Deploy Kubernetes manifests</a></li>
    <li><a href="#check-deployments">Check deployments</a></li>
    <li><a href="#resolve-tenant-project-creation-issue">Resolve Tenant project creation issue</a></li>
  </ul>
</nav>
            </div>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
<div class="tags">
  <a class="tag-link" href="/acm-workshop/tags/kcc/index.html">kcc</a>
  <a class="tag-link" href="/acm-workshop/tags/org-admin/index.html">org-admin</a>
</div>
            </header>
<h1 id="create-tenant-project">Create Tenant project</h1>

<p>
<a href="#image-1e6e9eae6cb0a21328d7973b1a0ae5a7" class="lightbox-link">
<img src="https://github.com/mathieu-benoit/my-images/raw/main/acm-workshop/org-admin.png" alt="Org Admin" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-1e6e9eae6cb0a21328d7973b1a0ae5a7">
<img src="https://github.com/mathieu-benoit/my-images/raw/main/acm-workshop/org-admin.png" alt="Org Admin" class="lightbox-image" loading="lazy">
</a>
<em>Duration: 10 min | Persona: Org Admin</em></p>
<p>In this section, you will create the Tenant project. The Tenant project will contain all the Google Cloud resources needed in this workshop.</p>
<p>Define variables:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>WORK_DIR<span style="color:#f92672">=</span>~/
</span></span><span style="display:flex;"><span>source <span style="color:#e6db74">${</span>WORK_DIR<span style="color:#e6db74">}</span>acm-workshop-variables.sh
</span></span><span style="display:flex;"><span>TENANT_PROJECT_ID<span style="color:#f92672">=</span>acm-workshop-<span style="color:#e6db74">${</span>RANDOM_SUFFIX<span style="color:#e6db74">}</span>-tenant
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;export TENANT_PROJECT_ID=</span><span style="color:#e6db74">${</span>TENANT_PROJECT_ID<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> &gt;&gt; <span style="color:#e6db74">${</span>WORK_DIR<span style="color:#e6db74">}</span>acm-workshop-variables.sh
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;export TENANT_PROJECT_SA_EMAIL=</span><span style="color:#e6db74">${</span>TENANT_PROJECT_ID<span style="color:#e6db74">}</span><span style="color:#e6db74">@</span><span style="color:#e6db74">${</span>HOST_PROJECT_ID<span style="color:#e6db74">}</span><span style="color:#e6db74">.iam.gserviceaccount.com&#34;</span> &gt;&gt; <span style="color:#e6db74">${</span>WORK_DIR<span style="color:#e6db74">}</span>acm-workshop-variables.sh
</span></span><span style="display:flex;"><span>source <span style="color:#e6db74">${</span>WORK_DIR<span style="color:#e6db74">}</span>acm-workshop-variables.sh
</span></span></code></pre></div><p>Create a dedicated folder for this Tenant project resources:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>mkdir <span style="color:#e6db74">${</span>WORK_DIR<span style="color:#e6db74">}</span>$HOST_PROJECT_DIR_NAME/projects
</span></span><span style="display:flex;"><span>mkdir <span style="color:#e6db74">${</span>WORK_DIR<span style="color:#e6db74">}</span>$HOST_PROJECT_DIR_NAME/projects/$TENANT_PROJECT_ID
</span></span></code></pre></div><h2 id="define-gcp-project">Define GCP project</h2>
<p>Define the GCP project either at the Folder level or the Organization level:

<div class="tab-panel" data-tab-group="56dfe1b84f774256eb9bb7daa41d0f20">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="Folder level"
      class="tab-nav-button tab-panel-style cstyle initial active"
      onclick="switchTab('56dfe1b84f774256eb9bb7daa41d0f20','Folder level')"
    >
      <div>
        <div class="tab-nav-hidden">Folder level</div>
        <div class="tab-nav-text">Folder level</div>
      </div>
    </button>
    <button
      data-tab-item="Org level"
      class="tab-nav-button tab-panel-style cstyle initial"
      onclick="switchTab('56dfe1b84f774256eb9bb7daa41d0f20','Org level')"
    >
      <div>
        <div class="tab-nav-hidden">Org level</div>
        <div class="tab-nav-text">Org level</div>
      </div>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="Folder level"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">

<p>At the Folder level:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF &gt; ${WORK_DIR}$HOST_PROJECT_DIR_NAME/projects/$TENANT_PROJECT_ID/project.yaml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: resourcemanager.cnrm.cloud.google.com/v1beta1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Project
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  annotations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    cnrm.cloud.google.com/auto-create-network: &#34;false&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  namespace: config-control
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  billingAccountRef:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    external: &#34;${BILLING_ACCOUNT_ID}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  folderRef:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    external: &#34;${FOLDER_OR_ORG_ID}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  resourceID: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div></div>
    </div>
    <div
      data-tab-item="Org level"
      class="tab-content tab-panel-style cstyle initial">
      <div class="tab-content-text">

<p>At the Organization level:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF &gt; ${WORK_DIR}$HOST_PROJECT_DIR_NAME/projects/$TENANT_PROJECT_ID/project.yaml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: resourcemanager.cnrm.cloud.google.com/v1beta1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Project
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  annotations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    cnrm.cloud.google.com/auto-create-network: &#34;false&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  namespace: config-control
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  billingAccountRef:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    external: &#34;${BILLING_ACCOUNT_ID}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  organizationRef:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    external: &#34;${FOLDER_OR_ORG_ID}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  resourceID: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div></div>
    </div>
  </div>
</div></p>
<h2 id="define-tenant-project-service-account">Define Tenant project service account</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF &gt; ${WORK_DIR}$HOST_PROJECT_DIR_NAME/projects/$TENANT_PROJECT_ID/service-account.yaml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: iam.cnrm.cloud.google.com/v1beta1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: IAMServiceAccount
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  namespace: config-control
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  annotations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    config.kubernetes.io/depends-on: resourcemanager.cnrm.cloud.google.com/namespaces/config-control/Project/${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  displayName: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF &gt; ${WORK_DIR}$HOST_PROJECT_DIR_NAME/projects/$TENANT_PROJECT_ID/workload-identity-user.yaml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: iam.cnrm.cloud.google.com/v1beta1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: IAMPartialPolicy
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: ${TENANT_PROJECT_ID}-sa-wi-user
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  namespace: config-control
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  annotations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    config.kubernetes.io/depends-on: iam.cnrm.cloud.google.com/namespaces/config-control/IAMServiceAccount/${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  resourceRef:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    name: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    kind: IAMServiceAccount
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  bindings:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - role: roles/iam.workloadIdentityUser
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      members:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - member: serviceAccount:${HOST_PROJECT_ID}.svc.id.goog[cnrm-system/cnrm-controller-manager-${TENANT_PROJECT_ID}]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div>
<div class="box notices cstyle tip">
  <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
  <div class="box-content">

<p>You could see that we use the annotation <code>config.kubernetes.io/depends-on</code>, <a href="https://cloud.google.com/anthos-config-management/docs/release-notes#March_24_2022" target="_blank">since the version 1.11 of Config Management</a> we could declare <a href="https://cloud.google.com/anthos-config-management/docs/how-to/declare-resource-dependency" target="_blank">resource dependencies between resource objects</a>. KCC already handles dependencies with a retry loop with backoff, which can make things with long reconcile time even longer and generate warnings or errors on these resources. With that annotation we are optimizing these behaviors. We will use this annotation as much as we can throughout this workshop.</p>
</div>
</div>
<h2 id="define-tenant-project-namespace-and-configconnectorcontext">Define Tenant project namespace and ConfigConnectorContext</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF &gt; ${WORK_DIR}$HOST_PROJECT_DIR_NAME/projects/$TENANT_PROJECT_ID/namespace.yaml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Namespace
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF &gt; ${WORK_DIR}$HOST_PROJECT_DIR_NAME/projects/$TENANT_PROJECT_ID/config-connector-context.yaml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: core.cnrm.cloud.google.com/v1beta1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: ConfigConnectorContext
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: configconnectorcontext.core.cnrm.cloud.google.com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  namespace: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  annotations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    config.kubernetes.io/depends-on: iam.cnrm.cloud.google.com/namespaces/config-control/IAMServiceAccount/${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  billingProject: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  googleServiceAccount: ${TENANT_PROJECT_SA_EMAIL}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  requestProjectPolicy: BILLING_PROJECT
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><h2 id="deploy-kubernetes-manifests">Deploy Kubernetes manifests</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>cd <span style="color:#e6db74">${</span>WORK_DIR<span style="color:#e6db74">}</span>$HOST_PROJECT_DIR_NAME/
</span></span><span style="display:flex;"><span>git add . <span style="color:#f92672">&amp;&amp;</span> git commit -m <span style="color:#e6db74">&#34;Setting up Tenant namespace/project&#34;</span> <span style="color:#f92672">&amp;&amp;</span> git push origin main
</span></span></code></pre></div><h2 id="check-deployments">Check deployments</h2>

<div class="mermaid align-center">
graph TD;
  IAMServiceAccount--&gt;Project
  IAMPartialPolicy--&gt;IAMServiceAccount
  ConfigConnectorContext--&gt;IAMServiceAccount
</div>
<p>List the Kubernetes resources managed by Config Sync in <strong>Config Controller</strong> for the <strong>Host project configs</strong> repository:

<div class="tab-panel" data-tab-group="f11860239acade2452ff37162bfbaae7">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="UI"
      class="tab-nav-button tab-panel-style cstyle initial active"
      onclick="switchTab('f11860239acade2452ff37162bfbaae7','UI')"
    >
      <div>
        <div class="tab-nav-hidden">UI</div>
        <div class="tab-nav-text">UI</div>
      </div>
    </button>
    <button
      data-tab-item="gcloud"
      class="tab-nav-button tab-panel-style cstyle initial"
      onclick="switchTab('f11860239acade2452ff37162bfbaae7','gcloud')"
    >
      <div>
        <div class="tab-nav-hidden">gcloud</div>
        <div class="tab-nav-text">gcloud</div>
      </div>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="UI"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">

<p>Run this command and click on this link:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>echo -e <span style="color:#e6db74">&#34;https://console.cloud.google.com/kubernetes/config_management/packages?project=</span><span style="color:#e6db74">${</span>HOST_PROJECT_ID<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><p>Wait until you see the <code>Sync status</code> column as <code>Synced</code> and the <code>Reconcile status</code> column as <code>Current</code>.</p>
</div>
    </div>
    <div
      data-tab-item="gcloud"
      class="tab-content tab-panel-style cstyle initial">
      <div class="tab-content-text">

<p>Run this command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>gcloud alpha anthos config sync repo describe <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --project $HOST_PROJECT_ID <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --managed-resources all <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --sync-name root-sync <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --sync-namespace config-management-system
</span></span></code></pre></div><p>Wait and re-run this command above until you see <code>&quot;status&quot;: &quot;SYNCED&quot;</code>. All the <code>managed_resources</code> listed should have <code>STATUS: Current</code> too.</p>
</div>
    </div>
  </div>
</div></p>
<p>List the GitHub runs for the <strong>Host project configs</strong> repository:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>cd <span style="color:#e6db74">${</span>WORK_DIR<span style="color:#e6db74">}</span>$HOST_PROJECT_DIR_NAME <span style="color:#f92672">&amp;&amp;</span> gh run list
</span></span></code></pre></div><p>List the Google Cloud resources created:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>gcloud projects describe $TENANT_PROJECT_ID
</span></span><span style="display:flex;"><span>gcloud iam service-accounts describe $TENANT_PROJECT_SA_EMAIL <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --project $HOST_PROJECT_ID
</span></span></code></pre></div><h2 id="resolve-tenant-project-creation-issue">Resolve Tenant project creation issue</h2>
<p>Let&rsquo;s make sure that the Tenant project has been successfully created.</p>
<p>Run this command below:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>kubectl get gcpproject -n config-control
</span></span></code></pre></div><p>If the output is similar to this below (<code>STATUS</code> <code>UpToDate</code>), you are good and you could move forward to the next page:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Plaintext" data-lang="Plaintext"><span style="display:flex;"><span>NAME                      AGE   READY   STATUS     STATUS AGE
</span></span><span style="display:flex;"><span>acm-workshop-742-tenant   50m   True    UpToDate   47m
</span></span></code></pre></div><p>But if you have this output below (<code>STATUS</code> <code>UpdateFailed</code>), that&rsquo;s where you will need to take actions:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Plaintext" data-lang="Plaintext"><span style="display:flex;"><span>NAME                      AGE   READY   STATUS        STATUS AGE
</span></span><span style="display:flex;"><span>acm-workshop-742-tenant   50m   True    UpdateFailed  47m
</span></span></code></pre></div><p>Run this command below to have a closer look at the details of the error:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>kubectl describe gcpproject -n config-control
</span></span></code></pre></div><p>The error you may have could be similar to:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Plaintext" data-lang="Plaintext"><span style="display:flex;"><span>Update call failed: error applying desired state: summary: failed pre-requisites: missing permission on &#34;billingAccounts/XXX&#34;: billing.resourceAssociations.create
</span></span></code></pre></div><p>We will resolve this issue by redeploying the <code>Project</code> resource by removing the <code>billingAccountRef</code> part.</p>
<p>Update the GCP project either at the Folder level or the Organization level:

<div class="tab-panel" data-tab-group="aa1f469c1dbe9faf1920a60651bf8f95">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="Folder level"
      class="tab-nav-button tab-panel-style cstyle initial active"
      onclick="switchTab('aa1f469c1dbe9faf1920a60651bf8f95','Folder level')"
    >
      <div>
        <div class="tab-nav-hidden">Folder level</div>
        <div class="tab-nav-text">Folder level</div>
      </div>
    </button>
    <button
      data-tab-item="Org level"
      class="tab-nav-button tab-panel-style cstyle initial"
      onclick="switchTab('aa1f469c1dbe9faf1920a60651bf8f95','Org level')"
    >
      <div>
        <div class="tab-nav-hidden">Org level</div>
        <div class="tab-nav-text">Org level</div>
      </div>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="Folder level"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">

<p>At the Folder level:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF &gt; ${WORK_DIR}$HOST_PROJECT_DIR_NAME/projects/$TENANT_PROJECT_ID/project.yaml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: resourcemanager.cnrm.cloud.google.com/v1beta1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Project
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  annotations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    cnrm.cloud.google.com/auto-create-network: &#34;false&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  namespace: config-control
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  folderRef:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    external: &#34;${FOLDER_OR_ORG_ID}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  resourceID: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div></div>
    </div>
    <div
      data-tab-item="Org level"
      class="tab-content tab-panel-style cstyle initial">
      <div class="tab-content-text">

<p>At the Organization level:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF &gt; ${WORK_DIR}$HOST_PROJECT_DIR_NAME/projects/$TENANT_PROJECT_ID/project.yaml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: resourcemanager.cnrm.cloud.google.com/v1beta1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Project
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  annotations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    cnrm.cloud.google.com/auto-create-network: &#34;false&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  namespace: config-control
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  organizationRef:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    external: &#34;${FOLDER_OR_ORG_ID}&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  resourceID: ${TENANT_PROJECT_ID}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div></div>
    </div>
  </div>
</div></p>
<p>Re-deploy the <code>Project</code> resource:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>cd <span style="color:#e6db74">${</span>WORK_DIR<span style="color:#e6db74">}</span>$HOST_PROJECT_DIR_NAME/
</span></span><span style="display:flex;"><span>git add . <span style="color:#f92672">&amp;&amp;</span> git commit -m <span style="color:#e6db74">&#34;Remove the billingAccountRef in order to create Tenant Project&#34;</span> <span style="color:#f92672">&amp;&amp;</span> git push origin main
</span></span></code></pre></div><p>Wait for <code>status</code> <code>SYNCED</code> with this command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>gcloud alpha anthos config sync repo describe <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --project $HOST_PROJECT_ID <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --managed-resources all <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --sync-name root-sync <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --sync-namespace config-management-system
</span></span></code></pre></div><p>And then, check that the Google Cloud project is created:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>gcloud projects describe $TENANT_PROJECT_ID
</span></span></code></pre></div><p>Then what you have to do is to manually assign the Billing Account to this project by running by yourself this command below:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Bash" data-lang="Bash"><span style="display:flex;"><span>gcloud beta billing projects link $TENANT_PROJECT_ID <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --billing-account $BILLING_ACCOUNT_ID
</span></span></code></pre></div><p>If you can&rsquo;t run the command above, the alternative is having someone in your organization (Billing Account or Organization admins) running it for you.</p>

            <footer class="footline">

            </footer>
          </article>
        </div>
      </main>
    </div>
    <aside id="sidebar" class="default-animation showVisitedLinks">
      <div id="header-wrapper" class="default-animation">
        <div id="header" class="default-animation">
<a id="logo" href="/acm-workshop/index.html">
	<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
		x="0px" y="0px" width="100px" height="100px" viewBox="0 0 24 24" xml:space="preserve">
		<style type="text/css">
			.st0 {
				fill: #FEBC00;
			}

			.st1 {
				fill: #EE3C2B;
			}

			.st2 {
				fill: #2BAA4F;
			}

			.st3 {
				fill: #3982F8;
			}
		</style>
		<polygon class="st0" points="6,15.8 12,5.3 18,15.8 23,20.8 23.2,21 23.2,21 12,1.6 0.8,21 0.8,21 1,20.8 " />
		<g>
			<g>
				<polygon class="st1" points="12,9.7 1,20.8 5.6,18.7 12,12.3 18.4,18.7 23,20.8 		" />
			</g>
		</g>
		<polygon class="st2" points="6,20.6 1.8,22.4 22.2,22.4 18,20.6 " />
		<polygon class="st3" points="23,20.8 12,15.8 1,20.8 0,22.4 1.8,22.4 12,17.8 22.2,22.4 24,22.4 " />
	</svg>
	</div>
	<b>ACM/ASM Workshop</b>
</a>

        </div>
      </div>
      <div id="content-wrapper" class="highlightable">
        <ul class="topics enlarge morespace">
          <li data-nav-id="/acm-workshop/overview/index.html" class=""><a class="padding" href="/acm-workshop/overview/index.html">Overview<i class="fas fa-check read-icon"></i></a><ul id="subsections-802c60793ff0af3dfb7211e666dc12f4" class="morespace">
          <li data-nav-id="/acm-workshop/overview/personas/index.html" class=""><a class="padding" href="/acm-workshop/overview/personas/index.html">Personas<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/overview/agenda/index.html" class=""><a class="padding" href="/acm-workshop/overview/agenda/index.html">Agenda<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/overview/before-you-begin/index.html" class=""><a class="padding" href="/acm-workshop/overview/before-you-begin/index.html">Before you begin<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/overview/credits/index.html" class=""><a class="padding" href="/acm-workshop/overview/credits/index.html">Credits<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/overview/costs/index.html" class=""><a class="padding" href="/acm-workshop/overview/costs/index.html">Costs<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/acm-workshop/host-project/index.html" class=""><a class="padding" href="/acm-workshop/host-project/index.html">1. Host project<i class="fas fa-check read-icon"></i></a><ul id="subsections-71c02f76cfc7d43b7427a340b0ea5395" class="morespace">
          <li data-nav-id="/acm-workshop/host-project/create-host-project/index.html" class=""><a class="padding" href="/acm-workshop/host-project/create-host-project/index.html">Create Host project<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/host-project/create-config-controller/index.html" class=""><a class="padding" href="/acm-workshop/host-project/create-config-controller/index.html">Create Config Controller<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/host-project/set-up-host-project-git-repo/index.html" class=""><a class="padding" href="/acm-workshop/host-project/set-up-host-project-git-repo/index.html">Set up Host project&#39;s Git repo<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/host-project/enforce-tenant-projects-policies/index.html" class=""><a class="padding" href="/acm-workshop/host-project/enforce-tenant-projects-policies/index.html">Enforce Tenant projects policies<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/acm-workshop/tenant-project/index.html" class="parent "><a class="padding" href="/acm-workshop/tenant-project/index.html">2. Tenant project<i class="fas fa-check read-icon"></i></a><ul id="subsections-f8117c090acee38678d57d19d7b86676" class="morespace">
          <li data-nav-id="/acm-workshop/tenant-project/create-tenant-project/index.html" class="active"><a class="padding" href="/acm-workshop/tenant-project/create-tenant-project/index.html">Create Tenant project<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/tenant-project/set-up-gke-project-git-repo/index.html" class=""><a class="padding" href="/acm-workshop/tenant-project/set-up-gke-project-git-repo/index.html">Set up Tenant project&#39;s Git repo<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/tenant-project/enforce-gcp-resources-policies/index.html" class=""><a class="padding" href="/acm-workshop/tenant-project/enforce-gcp-resources-policies/index.html">Enforce GCP resources policies<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/tenant-project/allow-monitoring/index.html" class=""><a class="padding" href="/acm-workshop/tenant-project/allow-monitoring/index.html">Allow Monitoring<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/tenant-project/set-up-monitoring/index.html" class=""><a class="padding" href="/acm-workshop/tenant-project/set-up-monitoring/index.html">Set up Monitoring<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/acm-workshop/networking/index.html" class=""><a class="padding" href="/acm-workshop/networking/index.html">3. Networking<i class="fas fa-check read-icon"></i></a><ul id="subsections-32ba51710c14dbc40b371b19ad442e93" class="morespace">
          <li data-nav-id="/acm-workshop/networking/allow-networking/index.html" class=""><a class="padding" href="/acm-workshop/networking/allow-networking/index.html">Allow Networking<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/networking/set-up-network/index.html" class=""><a class="padding" href="/acm-workshop/networking/set-up-network/index.html">Set up Network<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/acm-workshop/gke-cluster/index.html" class=""><a class="padding" href="/acm-workshop/gke-cluster/index.html">4. GKE cluster<i class="fas fa-check read-icon"></i></a><ul id="subsections-e37d194a28b30160fa3e8554e980ff66" class="morespace">
          <li data-nav-id="/acm-workshop/gke-cluster/allow-gke/index.html" class=""><a class="padding" href="/acm-workshop/gke-cluster/allow-gke/index.html">Allow GKE<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/gke-cluster/enforce-gke-policies/index.html" class=""><a class="padding" href="/acm-workshop/gke-cluster/enforce-gke-policies/index.html">Enforce GKE policies<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/gke-cluster/create-gke-cluster/index.html" class=""><a class="padding" href="/acm-workshop/gke-cluster/create-gke-cluster/index.html">Create GKE cluster<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/gke-cluster/allow-fleet/index.html" class=""><a class="padding" href="/acm-workshop/gke-cluster/allow-fleet/index.html">Allow Fleet<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/gke-cluster/set-up-gke-configs-git-repo/index.html" class=""><a class="padding" href="/acm-workshop/gke-cluster/set-up-gke-configs-git-repo/index.html">Set up GKE configs&#39;s Git repo<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/gke-cluster/enforce-kubernetes-policies/index.html" class=""><a class="padding" href="/acm-workshop/gke-cluster/enforce-kubernetes-policies/index.html">Enforce Kubernetes policies<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/gke-cluster/set-up-network-policies-logging/index.html" class=""><a class="padding" href="/acm-workshop/gke-cluster/set-up-network-policies-logging/index.html">Set up NetworkPolicies logging<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/acm-workshop/artifact-registry/index.html" class=""><a class="padding" href="/acm-workshop/artifact-registry/index.html">5. Artifact Registry<i class="fas fa-check read-icon"></i></a><ul id="subsections-b0fefb1065200f0d82d0ac5dbeaf14b9" class="morespace">
          <li data-nav-id="/acm-workshop/artifact-registry/allow-artifact-registry/index.html" class=""><a class="padding" href="/acm-workshop/artifact-registry/allow-artifact-registry/index.html">Allow Artifact Registry<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/artifact-registry/create-artifact-registry/index.html" class=""><a class="padding" href="/acm-workshop/artifact-registry/create-artifact-registry/index.html">Create Artifact Registry<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/artifact-registry/enforce-artifact-registry-policies/index.html" class=""><a class="padding" href="/acm-workshop/artifact-registry/enforce-artifact-registry-policies/index.html">Enforce Artifact Registry policies<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/acm-workshop/service-mesh/index.html" class=""><a class="padding" href="/acm-workshop/service-mesh/index.html">6. Service Mesh<i class="fas fa-check read-icon"></i></a><ul id="subsections-01f5706994e63158591802a8c5b59db9" class="morespace">
          <li data-nav-id="/acm-workshop/service-mesh/allow-asm/index.html" class=""><a class="padding" href="/acm-workshop/service-mesh/allow-asm/index.html">Allow ASM<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/service-mesh/install-asm/index.html" class=""><a class="padding" href="/acm-workshop/service-mesh/install-asm/index.html">Install ASM<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/service-mesh/set-up-asm-configs/index.html" class=""><a class="padding" href="/acm-workshop/service-mesh/set-up-asm-configs/index.html">Set up ASM configs<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/service-mesh/enforce-service-mesh-policies/index.html" class=""><a class="padding" href="/acm-workshop/service-mesh/enforce-service-mesh-policies/index.html">Enforce Service Mesh policies<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/acm-workshop/ingress-gateway/index.html" class=""><a class="padding" href="/acm-workshop/ingress-gateway/index.html">7. Ingress Gateway<i class="fas fa-check read-icon"></i></a><ul id="subsections-095c34dc5a5830fbe6c098a111f4371b" class="morespace">
          <li data-nav-id="/acm-workshop/ingress-gateway/create-ip-address/index.html" class=""><a class="padding" href="/acm-workshop/ingress-gateway/create-ip-address/index.html">Create IP address<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/ingress-gateway/allow-cloud-armor/index.html" class=""><a class="padding" href="/acm-workshop/ingress-gateway/allow-cloud-armor/index.html">Allow Cloud Armor<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/ingress-gateway/set-up-cloud-armor/index.html" class=""><a class="padding" href="/acm-workshop/ingress-gateway/set-up-cloud-armor/index.html">Set up Cloud Armor<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/ingress-gateway/deploy-ingress-gateway/index.html" class=""><a class="padding" href="/acm-workshop/ingress-gateway/deploy-ingress-gateway/index.html">Deploy Ingress Gateway<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/ingress-gateway/deploy-network-policies/index.html" class=""><a class="padding" href="/acm-workshop/ingress-gateway/deploy-network-policies/index.html">Deploy NetworkPolicies<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/ingress-gateway/deploy-authorization-policies/index.html" class=""><a class="padding" href="/acm-workshop/ingress-gateway/deploy-authorization-policies/index.html">Deploy AuthorizationPolicies<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/acm-workshop/whereami/index.html" class=""><a class="padding" href="/acm-workshop/whereami/index.html">8. Whereami app<i class="fas fa-check read-icon"></i></a><ul id="subsections-7e9046ad5996f70995bf102f06a13f6e" class="morespace">
          <li data-nav-id="/acm-workshop/whereami/set-up-dns/index.html" class=""><a class="padding" href="/acm-workshop/whereami/set-up-dns/index.html">Set up DNS<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/whereami/set-up-url-uptime-check/index.html" class=""><a class="padding" href="/acm-workshop/whereami/set-up-url-uptime-check/index.html">Set up URL uptime check<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/whereami/configure-config-sync/index.html" class=""><a class="padding" href="/acm-workshop/whereami/configure-config-sync/index.html">Configure Config Sync<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/whereami/prepare-container/index.html" class=""><a class="padding" href="/acm-workshop/whereami/prepare-container/index.html">Prepare container<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/whereami/deploy-app/index.html" class=""><a class="padding" href="/acm-workshop/whereami/deploy-app/index.html">Deploy app<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/whereami/deploy-authorization-policy/index.html" class=""><a class="padding" href="/acm-workshop/whereami/deploy-authorization-policy/index.html">Deploy AuthorizationPolicy<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/whereami/deploy-network-policies/index.html" class=""><a class="padding" href="/acm-workshop/whereami/deploy-network-policies/index.html">Deploy NetworkPolicies<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/whereami/deploy-sidecar/index.html" class=""><a class="padding" href="/acm-workshop/whereami/deploy-sidecar/index.html">Deploy Sidecar<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/acm-workshop/onlineboutique/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/index.html">9. Online Boutique apps<i class="fas fa-check read-icon"></i></a><ul id="subsections-ec235b6b5f6b4b955c3f353cbc6a519b" class="morespace">
          <li data-nav-id="/acm-workshop/onlineboutique/set-up-dns/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/set-up-dns/index.html">Set up DNS<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/onlineboutique/set-up-url-uptime-check/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/set-up-url-uptime-check/index.html">Set up URL uptime check<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/onlineboutique/allow-config-sync/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/allow-config-sync/index.html">Allow Config Sync<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/onlineboutique/configure-config-sync/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/configure-config-sync/index.html">Configure Config Sync<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/onlineboutique/prepare-containers-and-chart/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/prepare-containers-and-chart/index.html">Prepare containers and chart<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/onlineboutique/deploy-apps/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/deploy-apps/index.html">Deploy apps<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/onlineboutique/deploy-authorization-policies/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/deploy-authorization-policies/index.html">Deploy AuthorizationPolicies<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/onlineboutique/deploy-network-policies/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/deploy-network-policies/index.html">Deploy NetworkPolicies<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/onlineboutique/deploy-sidecars/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/deploy-sidecars/index.html">Deploy Sidecars<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/onlineboutique/memorystore/index.html" class="alwaysopen"><a class="padding" href="/acm-workshop/onlineboutique/memorystore/index.html">Memorystore<i class="fas fa-check read-icon"></i></a><ul id="subsections-acc306800279fb4f6dfb080d8713bc2a" class="morespace">
          <li data-nav-id="/acm-workshop/onlineboutique/memorystore/allow-memorystore/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/memorystore/allow-memorystore/index.html">Allow Memorystore<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/onlineboutique/memorystore/enforce-memorystore-policies/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/memorystore/enforce-memorystore-policies/index.html">Enforce Memorystore policies<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/onlineboutique/memorystore/create-memorystore/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/memorystore/create-memorystore/index.html">Create Memorystore<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/onlineboutique/memorystore/use-memorystore/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/memorystore/use-memorystore/index.html">Use Memorystore<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/onlineboutique/memorystore/secure-memorystore-access/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/memorystore/secure-memorystore-access/index.html">Secure Memorystore access<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/acm-workshop/onlineboutique/spanner/index.html" class="alwaysopen"><a class="padding" href="/acm-workshop/onlineboutique/spanner/index.html">Spanner<i class="fas fa-check read-icon"></i></a><ul id="subsections-bee50e7f4245ff1a78b215cd41d8a4dd" class="morespace">
          <li data-nav-id="/acm-workshop/onlineboutique/spanner/allow-spanner/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/spanner/allow-spanner/index.html">Allow Spanner<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/onlineboutique/spanner/create-spanner/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/spanner/create-spanner/index.html">Create Spanner<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/onlineboutique/spanner/use-spanner/index.html" class=""><a class="padding" href="/acm-workshop/onlineboutique/spanner/use-spanner/index.html">Use Spanner<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li>
          <li data-nav-id="/acm-workshop/bankofanthos/index.html" class=""><a class="padding" href="/acm-workshop/bankofanthos/index.html">10. Bank of Anthos apps<i class="fas fa-check read-icon"></i></a><ul id="subsections-8e9c8917aa02f581ef6507fa65eee2bc" class="morespace">
          <li data-nav-id="/acm-workshop/bankofanthos/set-up-dns/index.html" class=""><a class="padding" href="/acm-workshop/bankofanthos/set-up-dns/index.html">Set up DNS<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/bankofanthos/set-up-url-uptime-check/index.html" class=""><a class="padding" href="/acm-workshop/bankofanthos/set-up-url-uptime-check/index.html">Set up URL uptime check<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/bankofanthos/configure-config-sync/index.html" class=""><a class="padding" href="/acm-workshop/bankofanthos/configure-config-sync/index.html">Configure Config Sync<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/bankofanthos/prepare-containers/index.html" class=""><a class="padding" href="/acm-workshop/bankofanthos/prepare-containers/index.html">Prepare containers<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/bankofanthos/deploy-apps/index.html" class=""><a class="padding" href="/acm-workshop/bankofanthos/deploy-apps/index.html">Deploy apps<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/bankofanthos/deploy-authorization-policies/index.html" class=""><a class="padding" href="/acm-workshop/bankofanthos/deploy-authorization-policies/index.html">Deploy AuthorizationPolicies<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/bankofanthos/deploy-network-policies/index.html" class=""><a class="padding" href="/acm-workshop/bankofanthos/deploy-network-policies/index.html">Deploy NetworkPolicies<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/bankofanthos/deploy-sidecars/index.html" class=""><a class="padding" href="/acm-workshop/bankofanthos/deploy-sidecars/index.html">Deploy Sidecars<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/acm-workshop/monitoring-and-audit/index.html" class=""><a class="padding" href="/acm-workshop/monitoring-and-audit/index.html">11. Monitoring &amp; Audit<i class="fas fa-check read-icon"></i></a><ul id="subsections-e7ce738b1a3297733bb8808d01228e61" class="morespace">
          <li data-nav-id="/acm-workshop/monitoring-and-audit/verify-asm-version/index.html" class=""><a class="padding" href="/acm-workshop/monitoring-and-audit/verify-asm-version/index.html">Verify ASM version<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/monitoring-and-audit/monitor-apps-security/index.html" class=""><a class="padding" href="/acm-workshop/monitoring-and-audit/monitor-apps-security/index.html">Monitor apps security<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/monitoring-and-audit/monitor-apps-health/index.html" class=""><a class="padding" href="/acm-workshop/monitoring-and-audit/monitor-apps-health/index.html">Monitor apps health<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/monitoring-and-audit/trace-apps/index.html" class=""><a class="padding" href="/acm-workshop/monitoring-and-audit/trace-apps/index.html">Trace apps<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/monitoring-and-audit/monitor-waf-rules/index.html" class=""><a class="padding" href="/acm-workshop/monitoring-and-audit/monitor-waf-rules/index.html">Monitor WAF rules<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/monitoring-and-audit/scan-workloads/index.html" class=""><a class="padding" href="/acm-workshop/monitoring-and-audit/scan-workloads/index.html">Scan workloads<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/monitoring-and-audit/monitor-resources-synced/index.html" class=""><a class="padding" href="/acm-workshop/monitoring-and-audit/monitor-resources-synced/index.html">Monitor resources synced<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/monitoring-and-audit/monitor-policies-violations/index.html" class=""><a class="padding" href="/acm-workshop/monitoring-and-audit/monitor-policies-violations/index.html">Monitor policies violations<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/acm-workshop/monitoring-and-audit/monitor-uptime-checks/index.html" class=""><a class="padding" href="/acm-workshop/monitoring-and-audit/monitor-uptime-checks/index.html">Monitor uptime checks<i class="fas fa-check read-icon"></i></a></li></ul></li>
        </ul>
        <div id="shortcuts">
          <div class="nav-title padding">More</div>
          <ul class="space">
            <li><a class="padding" href="https://github.com/mathieu-benoit/acm-workshop/releases"><i class='fab fa-fw fa-github'></i> Release notes</a></li>
            <li><a class="padding" href="/acm-workshop/tags"><i class='fas fa-tags'></i> Tags</a></li>
          </ul>
        </div>
        <div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"></div>
        <hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter">
        <div id="prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVisitedLinks">
          <ul>
            <li id="select-language-container" class="footerLangSwitch">
              <div class="padding select-container">
                <i class="fas fa-language fa-fw"></i>
                <span>&nbsp;</span>
                <div class="select-style">
                  <label class="a11y-only" for="select-language">Language</label>
                  <select id="select-language" onchange="location = baseUri + this.value;">
                  </select>
                </div>
                <div class="select-clear"></div>
              </div>
            </li>
            <li id="select-variant-container" class="footerVariantSwitch">
              <div class="padding select-container">
                <i class="fas fa-paint-brush fa-fw"></i>
                <span>&nbsp;</span>
                <div class="select-style">
                  <label class="a11y-only" for="select-variant">Theme</label>
                  <select id="select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                    <option id="mine" value="mine" selected>Mine</option>
                  </select>
                </div>
                <div class="select-clear"></div>
              </div>
              <script>window.variants && variants.markSelectedVariant();</script>
            </li>
            <li class="footerVisitedLinks showVisitedLinks"><button class="padding" onclick="clearHistory();"><i class="fas fa-history fa-fw"></i><span>&nbsp;</span>Clear History</button></li>
          </ul>
        </div>
        <div id="footer" class="footerFooter showFooter">
	    <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>
        </div>
      </div>
    </aside>
    <script src="/acm-workshop/js/clipboard.min.js?1686931424" defer></script>
    <script src="/acm-workshop/js/perfect-scrollbar.min.js?1686931424" defer></script>
    <script src="/acm-workshop/js/d3/d3-color.min.js?1686931424" defer></script>
    <script src="/acm-workshop/js/d3/d3-dispatch.min.js?1686931424" defer></script>
    <script src="/acm-workshop/js/d3/d3-drag.min.js?1686931424" defer></script>
    <script src="/acm-workshop/js/d3/d3-ease.min.js?1686931424" defer></script>
    <script src="/acm-workshop/js/d3/d3-interpolate.min.js?1686931424" defer></script>
    <script src="/acm-workshop/js/d3/d3-selection.min.js?1686931424" defer></script>
    <script src="/acm-workshop/js/d3/d3-timer.min.js?1686931424" defer></script>
    <script src="/acm-workshop/js/d3/d3-transition.min.js?1686931424" defer></script>
    <script src="/acm-workshop/js/d3/d3-zoom.min.js?1686931424" defer></script>
    <script src="/acm-workshop/js/mermaid.min.js?1686931424" defer></script>
    <script>
      window.themeUseMermaid = JSON.parse("{}");
    </script>
    <script src="/acm-workshop/js/theme.js?1686931424" defer></script>
  </body>
</html>
